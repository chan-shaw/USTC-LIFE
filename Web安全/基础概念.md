# 安全世界观

> 简而言之就是利用一切手段拿到管理员权限

## 概念

- **发展历史 - ** 从90年代的网络、操作系统协议、软件安全(SSH exploit)到后来的web安全，冲击波蠕虫

- **安全问题的本质**是信任问题

- **安全是一个持续的过程**

- **安全的三要素**

  - **机密性 - ** 在传输过程中，文件的内容是要对其他人不可见的，常见的方式有加密
  - **完整性 - ** 保证传输的文件是完整的，没有经过篡改的，常用的方式有如md5签名
  - **可用性 - ** 用户在想使用服务的时候，能够获取到所需要的服务，常见的有并发处理，攻击有DOS
  - 增加的其他要素有，可审计性，不可抵赖性等等

- 安全评估实施的过程

  ```flow
  st=>start: start
  op1=>operation: 资产等级划分
  op2=>operation: 威胁分析
  op3=>operation: 风险分析
  op4=>operation: 确认解决方案
  e=>end: end
  
  st->op1->op2->op3->op4->e
  ```

  - **资产等级划分 - ** 互联网的安全核心是数据安全的问题，对资产等级划分，其实就是对数据的重要程度进行划分，一般来讲，最重要的数据在数据库中，然后是web应用,web应用可以从对数据库中的数据进行访问，用户使用web应用。

  - **威胁分析 - ** 知道了数据的重要性之后，我们应该思考的是，如何确认危险来自哪，也就是威胁出现在哪，它可能有哪些风险。现在常用的是一套叫做STRIDE的模型，通过以下6个方面进行思考：

  	 |               威胁               |       定义       | 对应的安全属性 |
    | :------------------------------: | :--------------: | :------------: |
    |          Spoofing(伪装)          | 冒充其他人的身份 |      认证      |
|         Tampering(篡改)          |     修改数据     |     完整性     |
    |        Repudiation(抵赖)         |  否认做过的事情  |   不可抵赖性   |
    | Information Disclosure(信息泄露) |   机密信息泄露   |     机密性     |
    |   Denial of Service(拒绝服务)    |     拒绝服务     |     可用性     |
    | Elevation of Privilege(提升权限) | 未经授权获得许可 |      授权      |
    
  - **风险分析 - ** 确认了威胁之后，我们需要对它的严重程度进行一个评级，常用的因素有可能性和严重性，所以构建风险模型的时候，有一个完整的模型对次进行评价，然后综合评定一个威胁的严重程度,DREAD模型：
  
     |       等级       |                     高(3)                      |                   中(2)                    |       低(1)        |
     | :--------------: | :--------------------------------------------: | :----------------------------------------: | :----------------: |
     | Damage Potential | 获得完整验证权限，执行管理员操作，非法文件上传 |                泄露敏感信息                |    泄露其他信息    |
     | Reproducibility  |             攻击者可以任意重复攻击             |     攻击者可以重复攻击，但是有实践限制     | 攻击者很难重复攻击 |
     |  Exploitability  |       初学者能在很短的时间内掌握攻击方式       |          熟练的攻击者才能完成攻击          |    很难利用漏洞    |
     |  Affected users  |          所有用户；默认用户；关键用户          |            部分用户，非默认配置            |     极少数用户     |
     | Discoverability  |         漏洞很明显，攻击条件很容易获得         | 在私有区域部分人才能看到，需要深入挖掘漏洞 | 发现该漏洞极其困难 |
  
     高危漏洞的评级为12 ~ 15分，中危则是8 ~ 11分，低危则是剩下
  
  - **确认解决方案  - ** 如何有效的解决风险问题

## 几个原则

- **Secure By Default - ** 设计的足够合理的系统会更加安全
  - 黑名单、白名单：
    - 黑名单：禁用Html如`<script>``<iframe>`等框架
    - 白名单：跨域访问时设定白名单，只允许特定的域来访问
  - 最小权限原则：系统只授予主体最小的能完成任务的权限，而不过度的授权
- **Defense in Depth - **攻击者只需要一个点能进来，而防御需要防御一个整个的面；在正确的地方要做正确的事
- **数据与代码分离 - ** 数据区和代码区分离，用户只允许修改数据区，而无法修改代码区，缓冲区溢出就是因为违背了这一原则
- **不可预测性原则 - ** 缓冲区溢出中让进程基指随机化，使得篡改伪造更加的困难；爬虫网站根据uid页面爬去规则，如果将uid处理后随机化使得uid的变化不可预测，能有效防止爬虫

- **同源策略(SOP,Same Origin Policy) - **一种约定，限制来自于不同源的脚本或者文档，对于源影响的因素有”host,子域名，端口，协议 同源对于存放js文件的域没要求，对于加载js的域有要求

